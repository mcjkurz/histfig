# Historical Figures Chat System - Environment Variables
# Copy to .env and fill in your values: cp .env.example .env

# Server
APP_PORT="5001"
DEBUG_MODE="false"

# External API (e.g., Poe, OpenAI)
EXTERNAL_API_URL="https://api.poe.com/v1"
EXTERNAL_API_KEY=""
EXTERNAL_MODELS="GPT-5.2,GPT-5-mini,GPT-5-nano,Gemini-2.5-Flash,Gemini-3-Flash"
DEFAULT_EXTERNAL_MODEL="GPT-5-mini"

# Local API (e.g., Ollama)
LOCAL_API_URL="http://localhost:11434/v1"
LOCAL_MODELS="gpt-oss:20b,gpt-oss:120b,qwen3:30b"
DEFAULT_LOCAL_MODEL=""

# Query augmentation (enriches search queries with LLM)
QUERY_AUGMENTATION_ENABLED="false"
QUERY_AUGMENTATION_API_URL=""
QUERY_AUGMENTATION_API_KEY=""
QUERY_AUGMENTATION_MODEL=""

# RAG (Retrieval-Augmented Generation)
RAG_ENABLED="true"

# Embeddings - "local" uses SentenceTransformer, "external" uses OpenAI-compatible API
EMBEDDING_SOURCE="local"
LOCAL_EMBEDDING_MODEL="Qwen/Qwen3-Embedding-0.6B"
EXTERNAL_EMBEDDING_MODEL="text-embedding-3-small"
EMBEDDING_API_URL="https://api.openai.com/v1"
EMBEDDING_API_KEY=""

# Document chunking
CHUNK_SIZE_WORDS="250"       # target words per chunk
MAX_CHUNK_CHARS="1000"       # max characters per chunk (hard limit)
OVERLAP_PERCENT="20"         # overlap between chunks (0-50%)

# Search tuning
MIN_COSINE_SIMILARITY="0.25" # minimum similarity threshold; results below this are discarded
SEARCH_MULTIPLIER="3"        # multiplier for initial retrieval (fetches N Ã— MAX_SEARCH_RESULTS before fusion)
RRF_K="60"                   # Reciprocal Rank Fusion constant; higher = less rank impact (score = 1/(k + rank))
MAX_SEARCH_RESULTS="30"      # max results returned to the LLM after fusion and filtering

# Admin
ADMIN_PASSWORD=""
# Chat password; if not set, the chat interface can be accessed without a password
CHAT_PASSWORD=""

# Document retrieval options for UI dropdown (comma-separated list of numbers)
DOCS_TO_RETRIEVE="2,3,5,10,15,20"

# Max characters allowed in a single user chat message (prevents abuse)
MAX_MESSAGE_LENGTH="2000"
